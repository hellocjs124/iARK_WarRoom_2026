<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iARK RMT ‰ΩúÊàòÊåáÊå•ÂÆ§ V2.2</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Inter"', '"Noto Sans SC"', 'sans-serif'],
                    },
                    colors: {
                        slate: {
                            850: '#1e293b',
                            900: '#0f172a',
                            950: '#020617',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; overflow: hidden; }
        
        /* Glass Effects */
        .glass-panel {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Highlight Glow */
        .glow-gold {
            box-shadow: 0 0 12px rgba(251, 191, 36, 0.2);
        }

        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="antialiased w-screen h-screen flex flex-col">

<div id="app" class="flex flex-col h-full w-full">

    <!-- Header: Taller and Larger Text -->
    <header class="glass-panel h-16 px-6 flex items-center justify-between shrink-0 z-50">
        <div class="flex items-center gap-4">
            <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-500/30">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
            </div>
            <div>
                <h1 class="text-xl font-bold text-white tracking-tight leading-none mb-0.5">iARK RMT <span class="text-indigo-400">‰ΩúÊàòÊåáÊå•ÂÆ§</span></h1>
                <span class="text-xs text-slate-400 uppercase tracking-widest font-medium">V2.2 Strategic Dashboard</span>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="flex bg-slate-800/50 p-1 rounded-lg border border-slate-700/50">
            <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id" 
                :class="['px-5 py-2 rounded-md text-sm font-bold transition-all flex items-center gap-2', currentTab === tab.id ? 'bg-indigo-600 text-white shadow' : 'text-slate-400 hover:text-white hover:bg-slate-700']">
                <span>{{ tab.icon }}</span> {{ tab.name }}
            </button>
        </nav>

        <!-- Actions -->
        <div class="flex gap-3">
            <input type="file" ref="csvInput" @change="handleImportCSV" class="hidden" accept=".csv">
            <button @click="$refs.csvInput.click()" class="flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-300 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700 transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                ÂØºÂÖ• CSV
            </button>
            <button @click="handleExportCSV" class="flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-300 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700 transition">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                ÂØºÂá∫ CSV
            </button>
        </div>
    </header>

    <!-- Main Content: Auto Scroll enabled for body content -->
    <main class="flex-1 overflow-y-auto bg-slate-900 relative scroll-smooth">
        
        <!-- View 1: Project Tracker -->
        <div v-if="currentTab === 'tracker'" class="p-6 min-h-full animate-fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-10">
                <div v-for="(p, idx) in projects" :key="p.id" 
                     class="bg-slate-800/40 rounded-xl border p-5 hover:bg-slate-800/80 transition group flex flex-col h-full shadow-lg"
                     :class="getStatusBorder(p.status)">
                    
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1 min-w-0 pr-2">
                            <div class="flex items-center gap-2 mb-1.5">
                                <span class="text-sm font-bold px-2 py-0.5 rounded bg-slate-700 text-slate-200 border border-slate-600">{{ p.priority || 'P1' }}</span>
                                <h3 class="text-lg font-bold text-white truncate w-full" :title="p.name">{{ p.name }}</h3>
                            </div>
                            <div class="text-sm text-slate-400 flex items-center gap-1.5">
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                                {{ p.owner }}
                            </div>
                        </div>
                        <button @click="toggleProjectStatus(p)" class="w-8 h-8 rounded-full flex items-center justify-center border border-slate-700/50 shadow-inner shrink-0" :class="getStatusDot(p.status)">
                        </button>
                    </div>

                    <div class="flex-1 space-y-4">
                        <div>
                            <div class="flex justify-between text-xs font-semibold text-slate-400 mb-1.5 uppercase tracking-wide">
                                <span>ËøõÂ∫¶</span>
                                <span :class="p.progress === 100 ? 'text-emerald-400' : 'text-slate-300'">{{ p.progress }}%</span>
                            </div>
                            <div class="w-full bg-slate-700/50 h-2 rounded-full overflow-hidden">
                                <div class="h-full rounded-full transition-all" :class="getProgressColor(p.status)" :style="{width: p.progress + '%'}"></div>
                            </div>
                        </div>
                        <div class="bg-slate-900/50 p-3 rounded-lg border border-slate-700/30 h-32 overflow-y-auto">
                            <p class="text-sm text-slate-300 leading-relaxed whitespace-pre-wrap">{{ p.weeklyUpdate }}</p>
                        </div>
                    </div>
                    
                    <button @click="editProject(idx)" class="mt-4 w-full py-2 text-xs font-bold text-slate-400 hover:text-white bg-slate-700/30 hover:bg-slate-700 rounded-lg transition uppercase tracking-wide">
                        ÁºñËæëËØ¶ÊÉÖ
                    </button>
                </div>
            </div>
        </div>

        <!-- View 2: Roadmap (Full page flow, no internal scrollbars) -->
        <div v-if="currentTab === 'roadmap'" class="p-6 min-h-full animate-fade-in">
            <div class="grid grid-cols-4 gap-6">
                <div v-for="q in ['Q1','Q2','Q3','Q4']" :key="q" class="flex flex-col bg-slate-800/20 rounded-2xl border border-slate-700/50 h-fit">
                    <!-- Quarter Header -->
                    <div class="p-4 text-center border-b border-indigo-500/30 bg-slate-800/60 rounded-t-2xl shadow-sm">
                        <h2 class="text-2xl font-black text-white tracking-widest">{{ q }}</h2>
                    </div>
                    
                    <!-- Content Flow -->
                    <div class="p-4 space-y-6">
                        <div v-for="month in getMonthsForQuarter(q)" :key="month">
                            <div class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 pb-1 border-b border-slate-700/50 flex items-center gap-2">
                                <span class="w-2 h-2 rounded-full bg-slate-600"></span>
                                {{ month }}
                            </div>
                            
                            <div class="space-y-3">
                                <div v-for="item in getRoadmapItems(q, month)" :key="item.id"
                                     @click="editRoadmapItem(item)"
                                     class="p-3.5 rounded-lg border cursor-pointer transition hover:-translate-y-1 shadow-sm group"
                                     :class="item.highlight ? 'bg-amber-900/10 border-amber-500/50 text-amber-100 glow-gold' : 'bg-slate-700/30 border-slate-700/50 text-slate-200 hover:bg-slate-700/60'">
                                    
                                    <div class="flex justify-between items-start gap-2">
                                        <div class="flex-1">
                                            <span class="inline-block px-2 py-0.5 rounded text-xs font-bold mb-1.5 opacity-90 shadow-sm" :class="getCategoryBadge(item.category)">
                                                {{ getCategoryLabel(item.category) }}
                                            </span>
                                            <p class="leading-relaxed font-medium text-base">
                                                <span v-if="item.highlight" class="mr-1 text-amber-400 text-lg align-text-bottom">‚òÖ</span>
                                                {{ item.title }}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div v-if="getRoadmapItems(q, month).length === 0" class="text-xs text-slate-600 italic text-center py-2 bg-slate-900/20 rounded">
                                    ÊöÇÊó†ËßÑÂàí
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Add Button -->
                    <button @click="addRoadmapItem(q)" class="p-3 text-sm font-bold text-slate-500 hover:text-white border-t border-slate-700/50 hover:bg-slate-700/50 transition rounded-b-2xl">
                        + Ê∑ªÂä†ËßÑÂàíÈ°π
                    </button>
                </div>
            </div>
        </div>

        <!-- View 3: Gap Matrix -->
        <div v-if="currentTab === 'gap'" class="p-8 min-h-full animate-fade-in flex flex-col">
            <div class="flex justify-end mb-6">
                <button @click="addGapRow" class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg flex items-center gap-2 transition hover:-translate-y-0.5">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    Êñ∞Â¢ûËØÑ‰º∞Áª¥Â∫¶
                </button>
            </div>
            
            <div class="bg-slate-800/40 rounded-2xl border border-slate-700 shadow-2xl overflow-hidden">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-900/80 text-slate-400 text-sm font-bold uppercase tracking-wider border-b border-slate-700">
                            <th class="p-5 w-1/4">ËØÑ‰º∞Áª¥Â∫¶</th>
                            <th class="p-5 text-center w-[15%]">Q1 Áé∞Áä∂</th>
                            <th class="p-5 text-center w-[15%]">Q2 ÁõÆÊ†á</th>
                            <th class="p-5 text-center w-[15%]">Q3 ÁõÆÊ†á</th>
                            <th class="p-5 text-center w-[15%]">Q4 ÊÑøÊôØ</th>
                            <th class="p-5 text-center w-[15%] bg-slate-800 text-indigo-300 shadow-inner">Á´ûÂìÅÊ†áÊùÜ</th>
                        </tr>
                    </thead>
                    <tbody class="text-base divide-y divide-slate-700/50">
                        <tr v-for="(row, idx) in gapMatrix" :key="row.id" class="group hover:bg-slate-800/30 transition">
                            <td class="p-5 font-bold text-white relative">
                                <input v-model="row.category" class="bg-transparent w-full focus:outline-none focus:text-indigo-400 focus:border-b focus:border-indigo-500 pb-1" />
                            </td>
                            <td v-for="col in ['q1','q2','q3','q4']" :key="col" 
                                class="p-5 text-center cursor-pointer select-none"
                                @click="toggleGapStatus(row, col)">
                                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-opacity-30 transition-all text-sm font-bold shadow-sm"
                                     :class="getGapStyle(row[col])">
                                     <span class="w-2 h-2 rounded-full" :class="getGapDot(row[col])"></span>
                                    {{ getGapLabel(row[col]) }}
                                </div>
                            </td>
                            <td class="p-5 text-center bg-slate-800/30 cursor-pointer select-none border-l border-slate-700/50" @click="toggleGapStatus(row, 'benchmark')">
                                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-opacity-30 transition-all text-sm font-bold shadow-sm"
                                     :class="getGapStyle(row.benchmark)">
                                     <span class="w-2 h-2 rounded-full" :class="getGapDot(row.benchmark)"></span>
                                    {{ getGapLabel(row.benchmark) }}
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <!-- Modals (Simple Overlays) - Larger Texts -->
    
    <!-- Project Edit Modal -->
    <div v-if="modals.project.show" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-slate-900 border border-slate-700 p-8 rounded-2xl w-full max-w-lg shadow-2xl">
            <h3 class="text-2xl font-bold text-white mb-6">ÁºñËæëÈ°πÁõÆ</h3>
            <div class="space-y-5">
                <div>
                    <label class="text-slate-400 text-sm mb-1 block">È°πÁõÆÂêçÁß∞</label>
                    <input v-model="modals.project.data.name" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>
                <div class="grid grid-cols-2 gap-4">
                     <div>
                        <label class="text-slate-400 text-sm mb-1 block">Ë¥üË¥£‰∫∫</label>
                        <input v-model="modals.project.data.owner" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>
                    <div>
                        <label class="text-slate-400 text-sm mb-1 block">Áä∂ÊÄÅ</label>
                        <select v-model="modals.project.data.status" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                            <option value="normal">üü¢ Ê≠£Â∏∏</option>
                            <option value="risk">üü° È£éÈô©</option>
                            <option value="blocked">üî¥ ÈòªÂ°û</option>
                            <option value="completed">üîµ ÂÆåÊàê</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="text-slate-400 text-sm mb-1 block">ËøõÂ∫¶ (%)</label>
                    <input type="number" v-model="modals.project.data.progress" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>
                <div>
                    <label class="text-slate-400 text-sm mb-1 block">Êú¨Âë®ËøõÂ±ï</label>
                    <textarea v-model="modals.project.data.weeklyUpdate" rows="4" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-8">
                <button @click="modals.project.show = false" class="px-6 py-2.5 text-slate-400 text-base hover:text-white transition">ÂèñÊ∂à</button>
                <button @click="saveProject" class="px-6 py-2.5 bg-indigo-600 text-white rounded-lg text-base font-bold hover:bg-indigo-500 transition shadow-lg">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Roadmap Item Modal -->
    <div v-if="modals.roadmap.show" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-slate-900 border border-slate-700 p-8 rounded-2xl w-full max-w-lg shadow-2xl">
            <h3 class="text-2xl font-bold text-white mb-6">ËßÑÂàíÈ°πËØ¶ÊÉÖ</h3>
            <div class="space-y-5">
                <div>
                    <label class="text-slate-400 text-sm mb-1 block">ÂÜÖÂÆπÊèèËø∞</label>
                    <textarea v-model="modals.roadmap.data.title" rows="4" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-slate-400 text-sm mb-1 block">ÂàÜÁ±ª</label>
                        <select v-model="modals.roadmap.data.category" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                            <option value="capability">ËÉΩÂäõË°•ÈΩê</option>
                            <option value="experience">‰ΩìÈ™å‰ºòÂåñ</option>
                            <option value="ai">AI Native</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-slate-400 text-sm mb-1 block">Êúà‰ªΩ</label>
                        <select v-model="modals.roadmap.data.month" class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-base text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                            <option v-for="m in getMonthsForQuarter(modals.roadmap.data.quarter)" :value="m">{{m}}</option>
                        </select>
                    </div>
                </div>
                <label class="flex items-center gap-3 cursor-pointer p-3 bg-slate-800/50 rounded-lg border border-slate-700">
                    <input type="checkbox" v-model="modals.roadmap.data.highlight" class="w-5 h-5 rounded bg-slate-800 border-slate-600 text-amber-500 focus:ring-amber-500">
                    <span class="text-base text-amber-400 font-bold">‚òÖ ËÆæ‰∏∫ÈáçÁÇπ (Highlight)</span>
                </label>
            </div>
            <div class="flex justify-between mt-8">
                <button @click="deleteRoadmapItem" class="text-rose-500 text-base font-medium hover:underline" v-if="modals.roadmap.data.id">Âà†Èô§Ê≠§È°π</button>
                <div v-else></div>
                <div class="flex gap-3">
                    <button @click="modals.roadmap.show = false" class="px-6 py-2.5 text-slate-400 text-base hover:text-white transition">ÂèñÊ∂à</button>
                    <button @click="saveRoadmapItem" class="px-6 py-2.5 bg-indigo-600 text-white rounded-lg text-base font-bold hover:bg-indigo-500 transition shadow-lg">‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                currentTab: 'tracker',
                tabs: [
                    { id: 'tracker', name: 'ÈáçÁÇπÈ°πÁõÆË∑üË∏™', icon: 'üöÄ' },
                    { id: 'roadmap', name: '2026 Roadmap', icon: 'üó∫Ô∏è' },
                    { id: 'gap', name: 'Â∑ÆË∑ùÂàÜÊûêÁü©Èòµ', icon: 'üìä' }
                ],
                // Data Models
                projects: [
                    { id: 1, name: "Êñ∞Âä†Âù°ËØÅÂà∏ (SG Launch)", owner: "Ray/Rosita", status: "risk", priority: "P0", progress: 85, weeklyUpdate: "ÊäÄÊúØÁ†îÂèëÂÆåÊàêÔºåËøõÂÖ• UAT„ÄÇÈ£éÈô©: RO ‰∫∫ÂëòÂÖ•ËÅåÊªûÂêé„ÄÇ" },
                    { id: 2, name: "È¶ôÊ∏ØËûçËµÑ‰∏öÂä° (Margin)", owner: "Zoe/ÁéãÁ∫≤", status: "normal", priority: "P0", progress: 40, weeklyUpdate: "Ê†∏ÂøÉÂà©ÊÅØÊ®°ÂùóÂºÄÂèë‰∏≠„ÄÇ" },
                    { id: 3, name: "App ‰ΩìÈ™å‰ºòÂåñ", owner: "Gary/È´òËµµËæâ", status: "normal", priority: "P1", progress: 20, weeklyUpdate: "Á°ÆÂÆö‰∏ÄÈîÆÂ§çË¥≠‰∏∫ÈÄüËµ¢È°π„ÄÇ" },
                    { id: 4, name: "AI È°πÁõÆ (AI Native)", owner: "Gary/Êù®Êó∂ÊÅ©", status: "risk", priority: "P1", progress: 15, weeklyUpdate: "App 2.0 ËßÜËßâËßÑËåÉËÆæËÆ°‰∏≠„ÄÇ" },
                    { id: 5, name: "Êµ∑Â§ñË¥≠‰π∞ÂäõÂª∫ËÆæ", owner: "Rosita/ÁéãÁ∫≤", status: "normal", priority: "P1", progress: 30, weeklyUpdate: "Ë¥¶Êà∑ÊâìÈÄöÊñπÊ°àËØÑÂÆ°ÂÆåÊàê„ÄÇ" },
                    { id: 6, name: "ËØÅÂà∏ÂÆöÊäï (SIP)", owner: "Gary/Ê¨ßËéπ", status: "normal", priority: "P1", progress: 10, weeklyUpdate: "PRD ËØÑÂÆ°Èò∂ÊÆµ„ÄÇ" },
                    { id: 7, name: "ÂÄ∫Âà∏È°πÁõÆ", owner: "Diana/Nancy", status: "normal", priority: "P2", progress: 50, weeklyUpdate: "Ë°åÊÉÖÊ∫êÂØπÊé•ÊµãËØï‰∏≠„ÄÇ" },
                    { id: 8, name: "‰ªäÊó•Ëææ (Money Plus)", owner: "Ê¨ßËéπ/Nancy", status: "completed", priority: "P1", progress: 100, weeklyUpdate: "Â∑≤‰∏äÁ∫øÁ®≥ÂÆöËøêË°å„ÄÇ" }
                ],
                // Roadmap flattened for easy CSV but grouped for view
                roadmapItems: [
                    // Q1
                    { id: 101, quarter: 'Q1', month: '3Êúà', category: 'capability', title: 'Êñ∞Âä†Âù°ËØÅÂà∏ (SG Launch): ÂºÄÊà∑/ÂÖ•Èáë/‰∫§ÊòìÂÖ®ÈìæË∑Ø', highlight: true },
                    { id: 102, quarter: 'Q1', month: '3Êúà', category: 'capability', title: 'È¶ôÊ∏ØËûçËµÑ‰∏öÂä° (Margin): Ê∏ØÁæéËÇ°ËûçËµÑ‰∏äÁ∫ø', highlight: true },
                    { id: 103, quarter: 'Q1', month: '3Êúà', category: 'capability', title: '[ÂÖ®ÂßîETF] ÁßÅÂãüÂÖ®Âßî‰∫§Êòì', highlight: false },
                    { id: 104, quarter: 'Q1', month: '3Êúà', category: 'capability', title: '[‰ªäÊó•Ëææ]Á∫ΩÁ∫¶Ê¢ÖÈöÜË¥ßÂü∫‰∏äÊû∂', highlight: false },
                    { id: 105, quarter: 'Q1', month: '3Êúà', category: 'experience', title: 'ÂºÄÊà∑ÊµÅÁ®ãÁÆÄÂåñ (SG/HK)', highlight: true },
                    { id: 106, quarter: 'Q1', month: '3Êúà', category: 'ai', title: 'Âú∫ÊôØËØïËøêË°å: ËµÑ‰∫ßÂàÜÊûêÊàñËµÑËÆØÊ¥ûÂØü', highlight: true },
                    { id: 107, quarter: 'Q1', month: '3Êúà', category: 'ai', title: '‰∫§‰∫í‰ºòÂåñ: ËØ∫Â®Ö AI ‰∫§‰∫íÊîπÈÄ†', highlight: false },
                    { id: 108, quarter: 'Q1', month: '3Êúà', category: 'ai', title: 'ËØ∫Â®Ö AI ‰∫ßÂìÅËßÑÂàíËÆæËÆ°', highlight: false },
                    { id: 109, quarter: 'Q1', month: '3Êúà', category: 'ai', title: 'Ê¶ÇÂøµÂèëÂ∏É: App 2.0 VIS Âèä Demo', highlight: false },
                    // Q2
                    { id: 201, quarter: 'Q2', month: '4Êúà', category: 'capability', title: '[Êñ∞Âä†Âù°ËØÅÂà∏]ÊòüËÇ°Ë°åÊÉÖ„ÄÅ‰∫§Êòì‰∏äÁ∫ø', highlight: true },
                    { id: 202, quarter: 'Q2', month: '4Êúà', category: 'capability', title: 'ÂÖ®Ë¥≠‰π∞ÂäõÊâìÈÄö (Phase 1): Áé∞Èáë+‰π∞Ê∏ØËÇ°', highlight: false },
                    { id: 203, quarter: 'Q2', month: '5Êúà', category: 'capability', title: 'IPO ËûçËµÑ (IPO Margin)', highlight: false },
                    { id: 204, quarter: 'Q2', month: '5Êúà', category: 'capability', title: 'ÂÄ∫Âà∏‰∫ßÂìÅ‰∏äÁ∫ø', highlight: false },
                    { id: 205, quarter: 'Q2', month: '4Êúà', category: 'capability', title: 'ËØÅÂà∏ÂÆöÊäï (SIP)', highlight: false },
                    { id: 206, quarter: 'Q2', month: '4Êúà', category: 'experience', title: 'Ë¥¶Êà∑ÁÆ°ÁêÜ‰∏öÂä°ÂÖ®Èù¢Á∫ø‰∏äÂåñ (PI/Á®éÂä°/Ëß£ÂÜª)', highlight: false },
                    { id: 207, quarter: 'Q2', month: '4Êúà', category: 'experience', title: '‰∏ÄÈîÆÂ§çË¥≠ÂºèÂÖ•Èáë', highlight: false },
                    { id: 208, quarter: 'Q2', month: '5Êúà', category: 'experience', title: '[ËØÅÂà∏Ë°åÊÉÖ]ÁæéËÇ°ÊëÜÁõòÂçáÁ∫ß', highlight: true },
                    { id: 209, quarter: 'Q2', month: '5Êúà', category: 'experience', title: '„ÄêÈáçÁ£Ö„ÄëËµÑ‰∫ßËßÜÂõæÊ†áÂáÜÂåñ (7Â§ßÂàÜÁ±ª)', highlight: false },
                    { id: 210, quarter: 'Q2', month: '5Êúà', category: 'experience', title: '„ÄêÈáçÁ£Ö„ÄëË¥ßÊû∂Ê∏ÖÊô∞Âåñ (ÂØºËà™ÈáçÊûÑ)', highlight: false },
                    { id: 211, quarter: 'Q2', month: '6Êúà', category: 'experience', title: 'ÊäïËµÑÂÖ®ÈìæË∑ØÈó≠ÁéØ‰ΩìÈ™å‰ºòÂåñ', highlight: false },
                    { id: 212, quarter: 'Q2', month: '4Êúà', category: 'ai', title: 'ËµÑËÆØÊ¥ûÂØü: AI ËàÜÊÉÖÂàÜÊûê', highlight: true },
                    { id: 213, quarter: 'Q2', month: '4Êúà', category: 'ai', title: 'Ê†∏ÂøÉËØ¶ÊÉÖÈ°µ AI Âåñ (ÂºÇÂä®/Ë¥¢Êä•)', highlight: false },
                    { id: 214, quarter: 'Q2', month: '4Êúà', category: 'ai', title: 'ËØ∫Â®Ö AI ‰∫∫ÊÄßÂåñ‰∫§‰∫í', highlight: false },
                    { id: 215, quarter: 'Q2', month: '5Êúà', category: 'ai', title: 'ËµÑ‰∫ßËØäÊñ≠ (Health Check)', highlight: false },
                    { id: 216, quarter: 'Q2', month: '6Êúà', category: 'ai', title: '‰∏ÄÂè•ËØùÁîüÊàêÊäïËµÑÁªÑÂêà', highlight: false },
                    // Q3
                    { id: 301, quarter: 'Q3', month: '7Êúà', category: 'capability', title: '[Â¢ûÊî∂] ÁæéËÇ°ÊúüÊùÉ (US Options): Ë°åÊÉÖ‰∏é‰∫§Êòì', highlight: true },
                    { id: 302, quarter: 'Q3', month: '8Êúà', category: 'capability', title: 'Algo ‰∫§Êòì (ÁÆóÊ≥ïÂçï)', highlight: false },
                    { id: 303, quarter: 'Q3', month: '9Êúà', category: 'capability', title: 'ÂÖ®Ë¥≠‰π∞ÂäõÊâìÈÄö (Phase 2): ËØÅÂà∏ÊâìÈÄöË¥¢ÂØå', highlight: false },
                    { id: 304, quarter: 'Q3', month: '7Êúà', category: 'experience', title: '‰ΩìÈ™åÂèØË°°Èáè (PV/UVÁúãÊùø)', highlight: false },
                    { id: 305, quarter: 'Q3', month: '8Êúà', category: 'experience', title: 'Ë¥¢ÂØå/ËµÑËÆØÈ°µ‰ΩìÈ™å‰ºòÂåñ: ËßÇÁÇπÂç≥Ë¥ßÊû∂', highlight: false },
                    { id: 306, quarter: 'Q3', month: '9Êúà', category: 'experience', title: 'ÂÆâÂçìÂ∫îÁî®ÂïÜÂ∫ó‰∏äÁ∫ø (HK/SG)', highlight: false },
                    { id: 307, quarter: 'Q3', month: '7Êúà', category: 'ai', title: 'ÂÆ¢Êà∑‰ªªÂä° DIY: Ëá™ÂÆö‰πâÁõØÁõòÊåá‰ª§', highlight: true },
                    { id: 308, quarter: 'Q3', month: '7Êúà', category: 'ai', title: 'Âçè‰ΩúÂºïÊìé (Nexus x App ËÅîÂä®)', highlight: false },
                    { id: 309, quarter: 'Q3', month: '8Êúà', category: 'ai', title: 'Â≠òÁª≠ÊúçÂä°Ëá™Âä®Âåñ: Êä•ÂëäÊé®ÈÄÅ', highlight: false },
                    { id: 310, quarter: 'Q3', month: '9Êúà', category: 'ai', title: 'AI ÁêÜË¥¢Â∏àÂçáÁ∫ß: Â§çÊùÇ‰∏öÂä°Âí®ËØ¢', highlight: false },
                    // Q4
                    { id: 401, quarter: 'Q4', month: '10Êúà', category: 'capability', title: 'Êï∞Â≠óË¥ßÂ∏Å (Hashkey)', highlight: true },
                    { id: 402, quarter: 'Q4', month: '11Êúà', category: 'capability', title: 'Â§öÂ∏ÇÂú∫Êâ©Â±ï (Êó•/Âè∞)', highlight: false },
                    { id: 403, quarter: 'Q4', month: '12Êúà', category: 'capability', title: 'ÂÖ®Ë¥≠‰π∞ÂäõÊâìÈÄö (Phase 3): ÂÆåÂÖ®ÊâìÈÄö', highlight: false },
                    { id: 404, quarter: 'Q4', month: '10Êúà', category: 'experience', title: 'ÊäïËµÑÂÖ®ÈìæË∑ØÈó≠ÁéØ‰ΩìÈ™å‰ºòÂåñ (ÁßÅÂãü/ËØÅÂà∏)', highlight: false },
                    { id: 405, quarter: 'Q4', month: '11Êúà', category: 'experience', title: 'ËµÑ‰∫ßÈ°µ‰ΩìÈ™å‰ºòÂåñ (Êî∂Áõä/ÂΩíÂõ†)', highlight: false },
                    { id: 406, quarter: 'Q4', month: '12Êúà', category: 'experience', title: 'Âêå‰∏ÄÂÆ¢Êà∑ËßÜÂõæ (One ID)', highlight: false },
                    { id: 407, quarter: 'Q4', month: '10Êúà', category: 'ai', title: '‰∫§‰∫íÂáèË¥ü: ‚Äú‰∏ÄÂè•ËØùÂäûÁêÜ‚Äù‰∏öÂä°', highlight: false },
                    { id: 408, quarter: 'Q4', month: '11Êúà', category: 'ai', title: 'Êô∫ËÉΩËæÖÂä©‰∫§Êòì (Voice Trading)', highlight: false }
                ],
                gapMatrix: [
                    { id: 1, category: "Âü∫Á°Ä‰∫§Êòì‰ΩìÈ™å", q1: "red", q2: "yellow", q3: "green", q4: "green", benchmark: "green" },
                    { id: 2, category: "Ë°çÁîüÂìÅ‰∏éÈ´òÈò∂ËÉΩÂäõ", q1: "red", q2: "yellow", q3: "green", q4: "green", benchmark: "green" },
                    { id: 3, category: "AI ‰∫§‰∫í‰ΩìÈ™å", q1: "yellow", q2: "green", q3: "green", q4: "star", benchmark: "yellow" },
                    { id: 4, category: "Ë¥¶Êà∑‰∏éËµÑÈáëÊïàÁéá", q1: "yellow", q2: "green", q3: "green", q4: "green", benchmark: "green" }
                ],
                // Modals
                modals: {
                    project: { show: false, data: {} },
                    roadmap: { show: false, data: {} }
                }
            }
        },
        methods: {
            // --- Helper: Months Map ---
            getMonthsForQuarter(q) {
                const map = {
                    'Q1': ['1Êúà', '2Êúà', '3Êúà'],
                    'Q2': ['4Êúà', '5Êúà', '6Êúà'],
                    'Q3': ['7Êúà', '8Êúà', '9Êúà'],
                    'Q4': ['10Êúà', '11Êúà', '12Êúà']
                };
                return map[q] || [];
            },
            getRoadmapItems(q, month) {
                return this.roadmapItems.filter(i => i.quarter === q && i.month === month);
            },
            getCategoryLabel(c) { return { capability: 'ËÉΩÂäõ', experience: '‰ΩìÈ™å', ai: 'AI' }[c] || c; },
            getCategoryBadge(c) { 
                return { capability: 'bg-blue-900 text-blue-300', experience: 'bg-emerald-900 text-emerald-300', ai: 'bg-purple-900 text-purple-300' }[c]; 
            },

            // --- Helper: Status Colors ---
            getStatusBorder(s) { return { normal: 'border-emerald-500/40', risk: 'border-amber-500/40', blocked: 'border-rose-500/40', completed: 'border-blue-500/40' }[s]; },
            getStatusDot(s) { return { normal: 'bg-emerald-500', risk: 'bg-amber-500', blocked: 'bg-rose-500', completed: 'bg-blue-500' }[s]; },
            getProgressColor(s) { return { normal: 'bg-emerald-500', risk: 'bg-amber-500', blocked: 'bg-rose-500', completed: 'bg-blue-500' }[s]; },
            getGapStyle(s) {
                return {
                    red: 'bg-rose-900/40 text-rose-300 border-rose-500/40',
                    yellow: 'bg-amber-900/40 text-amber-300 border-amber-500/40',
                    green: 'bg-emerald-900/40 text-emerald-300 border-emerald-500/40',
                    star: 'bg-purple-900/40 text-purple-300 border-purple-500/40 shadow-sm shadow-purple-500/20'
                }[s];
            },
            getGapLabel(s) { return { red: 'ËêΩÂêé', yellow: 'ËøΩËµ∂', green: 'ÈΩêÂπ≥', star: 'Ë∂ÖË∂ä' }[s]; },
            getGapDot(s) { return { red: 'bg-rose-500', yellow: 'bg-amber-500', green: 'bg-emerald-500', star: 'bg-purple-400' }[s]; },

            // --- Interactive Logic ---
            toggleProjectStatus(p) {
                const map = ['normal', 'risk', 'blocked', 'completed'];
                p.status = map[(map.indexOf(p.status) + 1) % 4];
            },
            editProject(idx) {
                this.modals.project.data = JSON.parse(JSON.stringify(this.projects[idx])); // deep copy
                this.modals.project.show = true;
                this.modals.project.index = idx;
            },
            saveProject() {
                if(this.modals.project.index !== undefined) {
                    this.projects[this.modals.project.index] = this.modals.project.data;
                } else {
                    this.modals.project.data.id = Date.now();
                    this.projects.unshift(this.modals.project.data);
                }
                this.modals.project.show = false;
            },
            addRoadmapItem(q) {
                this.modals.roadmap.data = { quarter: q, month: this.getMonthsForQuarter(q)[0], category: 'capability', title: '', highlight: false };
                this.modals.roadmap.show = true;
            },
            editRoadmapItem(item) {
                this.modals.roadmap.data = JSON.parse(JSON.stringify(item));
                this.modals.roadmap.show = true;
            },
            saveRoadmapItem() {
                const data = this.modals.roadmap.data;
                if(data.id) {
                    const idx = this.roadmapItems.findIndex(i => i.id === data.id);
                    if(idx !== -1) this.roadmapItems[idx] = data;
                } else {
                    data.id = Date.now();
                    this.roadmapItems.push(data);
                }
                this.modals.roadmap.show = false;
            },
            deleteRoadmapItem() {
                this.roadmapItems = this.roadmapItems.filter(i => i.id !== this.modals.roadmap.data.id);
                this.modals.roadmap.show = false;
            },
            toggleGapStatus(row, key) {
                const map = ['red', 'yellow', 'green', 'star'];
                row[key] = map[(map.indexOf(row[key]) + 1) % 4];
            },
            addGapRow() {
                this.gapMatrix.push({ id: Date.now(), category: "Êñ∞Áª¥Â∫¶", q1: "red", q2: "red", q3: "red", q4: "red", benchmark: "green" });
            },

            // --- CSV EXPORT / IMPORT ENGINE ---
            escapeCSV(str) {
                if (str === null || str === undefined) return '';
                const s = String(str);
                if (s.includes(',') || s.includes('"') || s.includes('\n')) {
                    return `"${s.replace(/"/g, '""')}"`;
                }
                return s;
            },
            handleExportCSV() {
                // Flatten all data into one CSV structure with a TYPE column
                let csvContent = "\uFEFFType,ID,Col1,Col2,Col3,Col4,Col5,Col6,Flag\n"; // Header
                
                // 1. Projects: Type=PROJ, ID, Name, Owner, Status, Progress, Priority, Update, -
                this.projects.forEach(p => {
                    csvContent += `PROJ,${p.id},${this.escapeCSV(p.name)},${this.escapeCSV(p.owner)},${p.status},${p.progress},${p.priority},${this.escapeCSV(p.weeklyUpdate)},\n`;
                });
                
                // 2. Roadmap: Type=ROAD, ID, Quarter, Month, Category, Title, -, -, Highlight
                this.roadmapItems.forEach(r => {
                    csvContent += `ROAD,${r.id},${r.quarter},${r.month},${r.category},${this.escapeCSV(r.title)},,,${r.highlight}\n`;
                });

                // 3. Gap: Type=GAP, ID, Category, Q1, Q2, Q3, Q4, Bench, -
                this.gapMatrix.forEach(g => {
                    csvContent += `GAP,${g.id},${this.escapeCSV(g.category)},${g.q1},${g.q2},${g.q3},${g.q4},${g.benchmark},\n`;
                });

                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', `WarRoom_Backup_${new Date().toISOString().slice(0,10)}.csv`);
                document.body.appendChild(link);
                link.click();
            },
            handleImportCSV(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    const text = e.target.result;
                    const rows = text.split('\n');
                    
                    // Simple parser handling quoted commas
                    const parseLine = (line) => {
                        const result = [];
                        let start = 0;
                        let inQuotes = false;
                        for (let i = 0; i < line.length; i++) {
                            if (line[i] === '"') inQuotes = !inQuotes;
                            if (line[i] === ',' && !inQuotes) {
                                let val = line.substring(start, i);
                                if (val.startsWith('"') && val.endsWith('"')) val = val.slice(1, -1).replace(/""/g, '"');
                                result.push(val);
                                start = i + 1;
                            }
                        }
                        let val = line.substring(start);
                        if (val.startsWith('"') && val.endsWith('"')) val = val.slice(1, -1).replace(/""/g, '"');
                        result.push(val);
                        return result;
                    };

                    const newProjects = [];
                    const newRoadmap = [];
                    const newGap = [];

                    for (let i = 1; i < rows.length; i++) {
                        if (!rows[i].trim()) continue;
                        const cols = parseLine(rows[i]);
                        const type = cols[0];
                        
                        if (type === 'PROJ') {
                            newProjects.push({
                                id: Number(cols[1]), name: cols[2], owner: cols[3], status: cols[4], progress: Number(cols[5]), priority: cols[6], weeklyUpdate: cols[7]
                            });
                        } else if (type === 'ROAD') {
                            newRoadmap.push({
                                id: Number(cols[1]), quarter: cols[2], month: cols[3], category: cols[4], title: cols[5], highlight: cols[8] === 'true'
                            });
                        } else if (type === 'GAP') {
                            newGap.push({
                                id: Number(cols[1]), category: cols[2], q1: cols[3], q2: cols[4], q3: cols[5], q4: cols[6], benchmark: cols[7]
                            });
                        }
                    }

                    if (newProjects.length || newRoadmap.length) {
                        this.projects = newProjects;
                        this.roadmapItems = newRoadmap;
                        this.gapMatrix = newGap;
                        alert('CSV ÂØºÂÖ•ÊàêÂäüÔºÅ');
                    } else {
                        alert('CSV Ê†ºÂºèÊó†ÊïàÊàñÊó†Êï∞ÊçÆ');
                    }
                };
                reader.readAsText(file);
            }
        }
    }).mount('#app');
</script>
</body>
</html>